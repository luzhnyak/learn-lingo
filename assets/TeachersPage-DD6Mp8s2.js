import{r as o,j as e,F as _,u as m,R as x,a as L,b as h}from"./index-DQhlNsHh.js";import{C as v}from"./Card-Bfe1fZKk.js";const j="_scrollUp_efput_1",w={scrollUp:j},b=()=>{const[a,c]=o.useState(!1);o.useEffect(()=>{const l=()=>{c(window.scrollY>1200)};return window.addEventListener("scroll",l),()=>{window.removeEventListener("scroll",l)}},[]);const r=()=>{window.scrollTo({top:0,behavior:"smooth"})};return e.jsx("div",{children:a&&e.jsx("div",{className:w.scrollUp,onClick:r,children:e.jsx(_,{})})})},F="_btn_dsken_1",S={btn:F},W=()=>{const{loadTeachers:a}=m(r=>({loading:r.loading,error:r.error,items:r.items,loadTeachers:r.loadTeachers})),c=()=>{a()};return e.jsx("button",{className:S.btn,type:"button",onClick:c,children:"Load more"})},E="_container_10dk7_1",N="_languagesWrapper_10dk7_9",A="_levelWrapper_10dk7_13",k="_priceWrapper_10dk7_17",P="_label_10dk7_21",f={container:E,languagesWrapper:N,levelWrapper:A,priceWrapper:k,label:P},T="_wrapper_19pxg_1",C="_btn_19pxg_8",I="_listWrapper_19pxg_28",R="_list_19pxg_28",U="_item_19pxg_49",u={wrapper:T,btn:C,listWrapper:I,list:R,item:U},M=x.forwardRef(({items:a,onSelect:c,onClose:r},l)=>{const n=o.useRef(null);return o.useEffect(()=>{const t=d=>{d.code==="Escape"&&r(!1)},i=d=>{n.current&&!n.current.contains(d.target)&&l.current&&!l.current.contains(d.target)&&r(!1)};return window.addEventListener("keydown",t),document.addEventListener("mousedown",i),()=>{window.removeEventListener("keydown",t),document.removeEventListener("mousedown",i)}},[r]),e.jsx("div",{className:u.listWrapper,ref:n,children:e.jsx("ul",{className:u.list,children:a.map(t=>e.jsx("li",{className:u.item,onClick:()=>c(t),children:t},t))})})}),g=({items:a=[],defaultSelect:c,onSelect:r})=>{const[l,n]=o.useState(!1),[t,i]=o.useState(c),d=o.useRef(null),s=p=>{r(p),i(p),n(!1)};return e.jsxs("div",{className:u.wrapper,children:[e.jsxs("button",{className:u.btn,onClick:()=>{n(!l)},ref:d,children:[t,e.jsx(L,{width:"20",height:"20"})]}),l&&e.jsx(M,{items:a,onSelect:s,onClose:()=>n(!1),ref:d})]})},y=["All","English","Spanish","French","German","Italian","Korean","Vietnamese","Mandarin Chinese"],D=["All","A1 Beginner","A2 Elementary","B1 Intermediate","B2 Upper-Intermediate","C1 Advanced","C2 Proficient"],O=["All","10","20","30","40","50","60"],$=()=>{const{filterLanguage:a,setFilterLanguage:c,filterLevel:r,setFilterLevel:l,filterPrice:n,setFilterPrice:t}=h(i=>({filterLanguage:i.filterLanguage,setFilterLanguage:i.setFilterLanguage,filterLevel:i.filterLevel,setFilterLevel:i.setFilterLevel,filterPrice:i.filterPrice,setFilterPrice:i.setFilterPrice}));return e.jsxs("div",{className:f.container,children:[e.jsxs("div",{className:f.languagesWrapper,children:[e.jsx("span",{className:f.label,children:"Languages"}),e.jsx(g,{items:y,defaultSelect:a||"All",onSelect:c})]}),e.jsxs("div",{className:f.levelWrapper,children:[e.jsx("span",{className:f.label,children:"Level of knowledge"}),e.jsx(g,{items:D,defaultSelect:r||"All",onSelect:l})]}),e.jsxs("div",{className:f.priceWrapper,children:[e.jsx("span",{className:f.label,children:"Price"}),e.jsx(g,{items:O,defaultSelect:n||"All",onSelect:t})]})]})},K=()=>{const{items:a,loadTeachers:c,isLoadMore:r}=m(s=>({loading:s.loading,isLoadMore:s.isLoadMore,error:s.error,items:s.items,loadTeachers:s.loadTeachers})),{filterLanguage:l,filterLevel:n,filterPrice:t}=h(s=>({filterLanguage:s.filterLanguage,filterLevel:s.filterLevel,filterPrice:s.filterPrice}));o.useEffect(()=>{c()},[c]);const[i,d]=o.useState(a);return o.useEffect(()=>{let s=[...a];l&&l!=="All"&&(s=s.filter(p=>p.languages.includes(l))),n&&n!=="All"&&(s=s.filter(p=>p.levels.includes(n))),t&&t!=="All"&&(s=s.filter(p=>+p.price_per_hour<=+t)),d([...s])},[a,l,n,t]),e.jsxs("main",{className:"container",children:[e.jsx($,{}),i.map(s=>e.jsx(v,{data:s},s.id)),r&&e.jsx(W,{}),e.jsx(b,{})]})};export{K as default};
